<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>·ª®ng d·ª•ng V·∫Ω ƒê·ªì Th·ªã - C·∫•u Tr√∫c R·ªùi R·∫°c</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <header>
            <h1>üîµ ·ª®ng d·ª•ng V·∫Ω ƒê·ªì Th·ªã - C·∫•u Tr√∫c R·ªùi R·∫°c</h1>
        </header>
        
        <div class="main-content">
            <!-- Panel b√™n tr√°i -->
            <div class="left-panel">
                <div class="control-section">
                    <h3>‚öôÔ∏è Lo·∫°i ƒê·ªì Th·ªã</h3>
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <label style="display: flex; align-items: center; cursor: pointer;">
                            <input type="checkbox" id="directedCheckbox" onchange="toggleDirected()" style="margin-right: 8px; width: 18px; height: 18px; cursor: pointer;">
                            <span style="font-weight: 600;">ƒê·ªì th·ªã c√≥ h∆∞·ªõng</span>
                        </label>
                    </div>
                </div>
                
                <div class="control-section">
                    <h3>‚ûï Th√™m ƒê·ªânh</h3>
                    <input type="text" id="nodeId" placeholder="Nh·∫≠p m√£ ƒë·ªânh (A, B, C...)">
                    <button onclick="addNode()">Th√™m ƒê·ªânh</button>
                </div>
                
                <div class="control-section">
                    <h3>üîó Th√™m C·∫°nh</h3>
                    <input type="text" id="node1" placeholder="ƒê·ªânh th·ª© nh·∫•t">
                    <input type="text" id="node2" placeholder="ƒê·ªânh th·ª© hai">
                    <input type="number" id="weight" placeholder="Tr·ªçng s·ªë" value="1" step="0.1">
                    <button onclick="addEdge()">Th√™m C·∫°nh</button>
                </div>
                
                <div class="control-section">
                    <h3>‚ùå X√≥a ƒê·ªânh & C·∫°nh</h3>
                    <input type="text" id="removeNodeId" placeholder="ƒê·ªânh c·∫ßn x√≥a">
                    <button onclick="removeNode()" class="danger-btn">X√≥a ƒê·ªânh</button>
                    <div style="margin-top: 10px;">
                        <input type="text" id="removeEdge1" placeholder="ƒê·ªânh 1">
                        <input type="text" id="removeEdge2" placeholder="ƒê·ªânh 2">
                        <button onclick="removeEdge()" class="danger-btn">X√≥a C·∫°nh</button>
                    </div>
                </div>
                
                <div class="control-section">
                    <h3>üìä Th·ªëng K√™ ƒê·ªì Th·ªã</h3>
                    <div id="stats">
                        <p>S·ªë ƒë·ªânh: <span id="numNodes">0</span></p>
                        <p>S·ªë c·∫°nh: <span id="numEdges">0</span></p>
                        <p>M·∫≠t ƒë·ªô: <span id="density">0.00</span></p>
                        <p>Li√™n th√¥ng: <span id="connected">Kh√¥ng</span></p>
                    </div>
                </div>
                
                <div class="control-section">
                    <h3>üîç Ki·ªÉm Tra ƒê·ªì Th·ªã</h3>
                    <button onclick="checkBipartite()">Ki·ªÉm Tra ƒê·ªì Th·ªã 2 Ph√≠a</button>
                    <div id="bipartiteResult" style="margin-top: 10px; padding: 10px; background: #f8f9fa; border-radius: 5px; display: none;">
                        <p style="margin: 0; font-size: 14px; color: #495057; white-space: pre-line;"></p>
                    </div>
                </div>
                
                <div class="control-section">
                    <h3>üìã Bi·ªÉu Di·ªÖn ƒê·ªì Th·ªã</h3>
                    <button onclick="showRepresentations()">Xem C√°c Bi·ªÉu Di·ªÖn</button>
                </div>
                
                <div class="control-section">
                    <h3>üíæ L∆∞u & T·∫£i</h3>
                    <button onclick="showSaveDialog()">üíæ L∆∞u ƒê·ªì Th·ªã</button>
                    <button onclick="showLoadDialog()">üìÇ T·∫£i ƒê·ªì Th·ªã</button>
                </div>
                
                <div class="control-section">
                    <h3>üîç ƒê∆∞·ªùng ƒêi Ng·∫Øn Nh·∫•t</h3>
                    <input type="text" id="sourceNode" placeholder="ƒê·ªânh b·∫Øt ƒë·∫ßu">
                    <input type="text" id="targetNode" placeholder="ƒê·ªânh k·∫øt th√∫c">
                    <button onclick="findShortestPath()">T√¨m ƒê∆∞·ªùng ƒêi</button>
                    <div id="pathResult" style="margin-top: 10px; padding: 10px; background: #f8f9fa; border-radius: 5px; display: none;">
                        <p style="margin: 0; font-size: 14px; color: #495057;"></p>
                    </div>
                </div>
                
                <div class="control-section">
                    <h3>üå≤ Duy·ªát ƒê·ªì Th·ªã</h3>
                    <input type="text" id="traversalStart" placeholder="ƒê·ªânh b·∫Øt ƒë·∫ßu">
                    <button onclick="runBFS()">BFS - Duy·ªát Theo Chi·ªÅu R·ªông</button>
                    <button onclick="runDFS()">DFS - Duy·ªát Theo Chi·ªÅu S√¢u</button>
                    <div id="traversalResult" style="margin-top: 10px; padding: 10px; background: #f8f9fa; border-radius: 5px; display: none;">
                        <p style="margin: 0; font-size: 14px; color: #495057;"></p>
                    </div>
                </div>
                
                <div class="control-section">
                    <button class="danger-btn" onclick="clearAll()">üóëÔ∏è X√≥a To√†n B·ªô</button>
                </div>
                
                <div class="control-section instructions">
                    <h3>üí° H∆∞·ªõng D·∫´n S·ª≠ D·ª•ng</h3>
                    <ul>
                        <li><strong>Ctrl + Click:</strong> Th√™m ƒë·ªânh m·ªõi</li>
                        <li><strong>K√©o th·∫£ ƒë·ªânh:</strong> Di chuy·ªÉn ƒë·ªânh</li>
                        <li><strong>Shift + Click:</strong> N·ªëi hai ƒë·ªânh</li>
                        <li><strong>Chu·ªôt ph·∫£i + K√©o:</strong> Di chuy·ªÉn khung nh√¨n</li>
                        <li><strong>Con lƒÉn chu·ªôt:</strong> Ph√≥ng to/thu nh·ªè</li>
                    </ul>
                </div>
            </div>
            
            <!-- Canvas v·∫Ω ƒë·ªì th·ªã -->
            <div class="canvas-container">
                <canvas id="graphCanvas" width="800" height="600"></canvas>
            </div>
        </div>
    </div>
    
    <!-- Modal l∆∞u ƒë·ªì th·ªã -->
    <div id="saveModal" class="modal">
        <div class="modal-content">
            <h2>üíæ L∆∞u ƒê·ªì Th·ªã</h2>
            <input type="text" id="saveFilename" placeholder="Nh·∫≠p t√™n file (kh√¥ng c·∫ßn .json)" style="width: 100%; padding: 10px; margin: 10px 0; border: 2px solid #ddd; border-radius: 5px;">
            <div style="display: flex; gap: 10px; margin-top: 15px;">
                <button onclick="saveGraph()" style="flex: 1; padding: 12px; background: #28a745; color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: 600;">L∆∞u</button>
                <button onclick="closeModal('saveModal')" style="flex: 1; padding: 12px; background: #6c757d; color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: 600;">H·ªßy</button>
            </div>
        </div>
    </div>
    
    <!-- Modal t·∫£i ƒë·ªì th·ªã -->
    <div id="loadModal" class="modal">
        <div class="modal-content">
            <h2>üìÇ T·∫£i ƒê·ªì Th·ªã</h2>
            <div id="fileList" style="max-height: 400px; overflow-y: auto; margin: 15px 0;"></div>
            <button onclick="closeModal('loadModal')" style="width: 100%; padding: 12px; background: #6c757d; color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: 600;">ƒê√≥ng</button>
        </div>
    </div>
    
    <!-- Modal bi·ªÉu di·ªÖn ƒë·ªì th·ªã -->
    <div id="representationModal" class="modal">
        <div class="modal-content" style="max-width: 800px;">
            <h2>üìã C√°c Ph∆∞∆°ng Ph√°p Bi·ªÉu Di·ªÖn ƒê·ªì Th·ªã</h2>
            
            <div style="margin: 20px 0;">
                <h3 style="color: #495057; border-bottom: 2px solid #667eea; padding-bottom: 10px;">1Ô∏è‚É£ Ma Tr·∫≠n K·ªÅ (Adjacency Matrix)</h3>
                <div id="matrixRepresentation" style="overflow-x: auto; background: #f8f9fa; padding: 15px; border-radius: 8px; margin-top: 10px;"></div>
            </div>
            
            <div style="margin: 20px 0;">
                <h3 style="color: #495057; border-bottom: 2px solid #667eea; padding-bottom: 10px;">2Ô∏è‚É£ Danh S√°ch K·ªÅ (Adjacency List)</h3>
                <div id="listRepresentation" style="overflow-x: auto; background: #f8f9fa; padding: 15px; border-radius: 8px; margin-top: 10px;"></div>
            </div>
            
            <div style="margin: 20px 0;">
                <h3 style="color: #495057; border-bottom: 2px solid #667eea; padding-bottom: 10px;">3Ô∏è‚É£ Danh S√°ch C·∫°nh (Edge List)</h3>
                <div id="edgeRepresentation" style="overflow-x: auto; background: #f8f9fa; padding: 15px; border-radius: 8px; margin-top: 10px;"></div>
            </div>
            
            <button onclick="closeModal('representationModal')" style="width: 100%; padding: 12px; background: #6c757d; color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: 600; margin-top: 15px;">ƒê√≥ng</button>
        </div>
    </div>
    
    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>
